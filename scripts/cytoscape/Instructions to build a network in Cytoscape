Instructions to build a network in Cytoscape

1. Import table s-core-cultivar-rel-taxo.csv from script 304_bac_sig in R.

File -> Import -> Network from file

ASVs -> Source Node
Cultivars -> Target
Remaining features -> Source Node Attribute


2. Work on the Node Table
- Tools -> Analyse Network
- Go to Class column and add "Variety" to the cultivars
- Import relative-ab.csv table from script 304_bac_sig in R after deleting the first column by matching the "ASV" column with the "shared_names" column, name the relative abundances column "mean_RA"


3. Work on the Layout
- Layout -> Group Attribute Layout -> Membership OR Layout -> yFiles circular layout
- To group ASVs by number of connections use "degree.layout" column on Node Table as guide
- To group Varieties by number of unique ASVs look at the upset plot 
- Use Layout -> Attribute Circle Layout on selected nodes by "degree" and Layout Tools to organize the groups
- Use the "membership column" to sort out the outter layer ASVs


4. Change style according to the metadata
- Select: curved
- Fill Color: Pick "Class" for column and discrete mapping. Change the colors accordingly
- Label Font Size: 40, pick "show_names" and Passthrough Mapping
- Shape: Pick column "Class" and change the shape in "Variety"
- Size: standard = 128, pick column "mean_RA" and continuous mapping, adjust values therin with min = 50, max = 200
- Create a column called "show_names" to add the ASV and cultivar names to show
- Arrange the names one by one with "Label Position" by selecting the column "show_names"


5. Annotations

- Choose the type of annotation and click on the image to add it, go to apearence and edit text, size 36 is ok
- If the Legend Panel is not visible go to App Manager and search for "Legend" -> Install Legend Creator -> Close 
	- On the Legend Panel click "Scan Network" and the "Refresh Legend"
	- Remove the Tile, Subtitle, Node Label Position and Node Shape "Refresh Legend" again
- Go to the Annotation tab and edit the text on the legend.